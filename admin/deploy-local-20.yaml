version: "3"

services:
  rutil-vm-api:
    image: ititcloud/rutil-vm-api:0.2.0-beta2
    container_name: rutil-vm-api
    ports:
      - "8080:8080"
      - "8443:8443"
    environment:
      - RUTIL_VM_OVIRT_IP=192.168.0.20
      - RUTIL_VM_OVIRT_PORT_HTTPS=443
      - RUTIL_VM_PORT_HTTPS=8443
      - POSTGRES_JDBC_PORT=5432
      - POSTGRES_DATASOURCE_JDBC_ID=rutil
      - POSTGRES_DATASOURCE_JDBC_PW=rutil1!
    networks:
      - ovirt_network

#  nginx:
#    image: nginx:stable-alpine3.20-perl
#    platform: linux/amd64
#    container_name: nginx-proxy
#    ports:
#      - "80:80"
#      - "443:443"
#    volumes:
#      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
#    depends_on:
#      - rutil
#    networks:
#      - ovirt_network

networks:
  ovirt_network:
    driver: bridge